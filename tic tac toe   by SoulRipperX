import tkinter as tk
from tkinter import messagebox

# ตรวจสอบผู้ชนะ
def check_winner(board, player):
    for i in range(3):
        if all([board[i][j] == player for j in range(3)]):
            return True
        if all([board[j][i] == player for j in range(3)]):
            return True

    if all([board[i][i] == player for i in range(3)]):
        return True
    if all([board[i][2-i] == player for i in range(3)]):
        return True

    return False

# ตรวจสอบว่าเต็มหรือยัง
def is_full(board):
    return all([cell != " " for row in board for cell in row])

# เมื่อกดปุ่ม
def on_click(row, col):
    global current_player

    if board[row][col] == " ":
        board[row][col] = players[current_player]
        buttons[row][col]["text"] = players[current_player]

        if check_winner(board, players[current_player]):
            messagebox.showinfo("Game Over", f"Player {players[current_player]} wins!")
            reset_game()
            return

        if is_full(board):
            messagebox.showinfo("Game Over", "It's a tie!")
            reset_game()
            return

        current_player = 1 - current_player

# รีเซ็ตเกม
def reset_game():
    global board, current_player
    board = [[" " for _ in range(3)] for _ in range(3)]
    current_player = 0
    for i in range(3):
        for j in range(3):
            buttons[i][j]["text"] = ""

# สร้างหน้าต่างหลัก
root = tk.Tk()
root.title("Tic Tac Toe")

board = [[" " for _ in range(3)] for _ in range(3)]
players = ["X", "O"]
current_player = 0
buttons = []

# สร้างปุ่ม 3x3
for i in range(3):
    row = []
    for j in range(3):
        button = tk.Button(root, text="", font=("Arial", 24), width=5, height=2,
                           command=lambda r=i, c=j: on_click(r, c))
        button.grid(row=i, column=j)
        row.append(button)
    buttons.append(row)

root.mainloop()